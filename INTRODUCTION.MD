# Introduction √† Node.js

Node.js est un environnement d'ex√©cution JavaScript c√¥t√© serveur, bas√© sur le moteur V8 de Google Chrome. Il permet d'ex√©cuter du JavaScript en dehors du navigateur, offrant ainsi la possibilit√© de cr√©er des applications c√¥t√© serveur rapides et scalables.

## Caract√©ristiques principales de Node.js

- **Non-bloquant et √† √©v√©nements** : Node.js utilise un mod√®le √† √©v√©nements et non-bloquant pour traiter les op√©rations d'E/S.
- **Rapide** : Node.js est rapide gr√¢ce √† son moteur V8 et son architecture.
- **Un seul langage** : Vous pouvez utiliser JavaScript pour le front-end et le back-end.

## Installation de Node.js

1. **T√©l√©chargez Node.js** : Rendez-vous sur le site officiel [https://nodejs.org](https://nodejs.org) et t√©l√©chargez la version LTS recommand√©e.
2. **Installez Node.js** : Suivez les instructions pour votre syst√®me d'exploitation.
3. **V√©rifiez l'installation** :

```bash
node -v   # Affiche la version de Node.js
npm -v    # Affiche la version de npm (Node Package Manager)
```
# Introduction √† Node.js

Node.js est un environnement d'ex√©cution JavaScript c√¥t√© serveur, bas√© sur le moteur V8 de Google Chrome. Il permet d'ex√©cuter du JavaScript en dehors du navigateur, offrant ainsi la possibilit√© de cr√©er des applications c√¥t√© serveur rapides et scalables.

## Caract√©ristiques principales de Node.js

- **Non-bloquant et √† √©v√©nements** : Node.js utilise un mod√®le √† √©v√©nements et non-bloquant pour traiter les op√©rations d'E/S.
- **Rapide** : Node.js est rapide gr√¢ce √† son moteur V8 et son architecture.
- **Un seul langage** : Vous pouvez utiliser JavaScript pour le front-end et le back-end.

## Installation de Node.js

1. **T√©l√©chargez Node.js** : Rendez-vous sur le site officiel [https://nodejs.org](https://nodejs.org) et t√©l√©chargez la version LTS recommand√©e.
2. **Installez Node.js** : Suivez les instructions pour votre syst√®me d'exploitation.
3. **V√©rifiez l'installation** :

```bash
node -v   # Affiche la version de Node.js
npm -v    # Affiche la version de npm (Node Package Manager)
```

---
---

# Premier programme en Node.js

Cr√©ons un programme simple qui affiche ¬´ Bonjour, Node.js ! ¬ª.

1. **Cr√©ez un fichier `app.js`** :
   
```javascript
// app.js
console.log('Bonjour, Node.js !');
```

2. **Ex√©cutez le fichier** :

```bash
node app.js
```

Vous devriez voir le message s'afficher dans le terminal.

---

# Modules en Node.js

Node.js utilise des modules pour organiser le code. Un module peut √™tre un fichier ou un ensemble de fonctions.

### Importer des modules internes

Node.js fournit des modules internes, comme `fs` pour le syst√®me de fichiers ou `http` pour cr√©er un serveur.

#### Exemple : Lecture d'un fichier

Cr√©ez un fichier `data.txt` avec le contenu suivant :

```
Bonjour, Node.js !
```

Code pour lire ce fichier :

```javascript
const fs = require('fs');

fs.readFile('data.txt', 'utf8', (err, data) => {
    if (err) {
        console.error('Erreur lors de la lecture du fichier :', err);
        return;
    }
    console.log('Contenu du fichier :', data);
});
```

### Cr√©er des modules personnalis√©s

1. **Cr√©ez un fichier `math.js`** :

```javascript
// math.js
exports.add = (a, b) => a + b;
exports.subtract = (a, b) => a - b;
```

2. **Utilisez le module** :

```javascript
// app.js
const math = require('./math');

console.log('Addition :', math.add(5, 3));
console.log('Soustraction :', math.subtract(5, 3));
```

---

# Cr√©ation d'un serveur HTTP basique

Utilisons le module `http` pour cr√©er un serveur.

```javascript
const http = require('http');

const server = http.createServer((req, res) => {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Bonjour, Node.js !\n');
});

const PORT = 3000;
server.listen(PORT, () => {
    console.log(`Serveur en cours d'ex√©cution sur http://localhost:${PORT}`);
});
```

D√©marrez le serveur avec :

```bash
node app.js
```

Puis acc√©dez √† [http://localhost:3000](http://localhost:3000) dans votre navigateur.

---

# TP : Cr√©er une API REST simple

### Objectif

Cr√©er une API REST pour g√©rer une liste de t√¢ches.

### √âtapes

1. **Initialisez un projet Node.js** :

```bash
npm init -y
```

2. **Installez Express** :

```bash
npm install express
```

3. **Cr√©ez un fichier `server.js`** :

```javascript
const express = require('express');
const app = express();
const PORT = 3000;

app.use(express.json());

let tasks = [
    { id: 1, title: 'Apprendre Node.js', completed: false },
    { id: 2, title: 'Pratiquer Express', completed: true }
];

// Obtenir toutes les t√¢ches
app.get('/tasks', (req, res) => {
    res.json(tasks);
});

// Ajouter une nouvelle t√¢che
app.post('/tasks', (req, res) => {
    const newTask = {
        id: tasks.length + 1,
        title: req.body.title,
        completed: false
    };
    tasks.push(newTask);
    res.status(201).json(newTask);
});

// Mettre √† jour une t√¢che
app.put('/tasks/:id', (req, res) => {
    const task = tasks.find(t => t.id === parseInt(req.params.id));
    if (!task) return res.status(404).send('T√¢che non trouv√©e');

    task.title = req.body.title || task.title;
    task.completed = req.body.completed !== undefined ? req.body.completed : task.completed;
    res.json(task);
});

// Supprimer une t√¢che
app.delete('/tasks/:id', (req, res) => {
    const taskIndex = tasks.findIndex(t => t.id === parseInt(req.params.id));
    if (taskIndex === -1) return res.status(404).send('T√¢che non trouv√©e');

    const deletedTask = tasks.splice(taskIndex, 1);
    res.json(deletedTask);
});

app.listen(PORT, () => {
    console.log(`Serveur API en cours d'ex√©cution sur http://localhost:${PORT}`);
});
```

4. **Testez l'API** :
   - Utilisez un outil comme Postman ou Curl pour tester les routes :
     - `GET /tasks`
     - `POST /tasks`
     - `PUT /tasks/:id`
     - `DELETE /tasks/:id`

---
Tester votre API avec `curl`. Assurez-vous que votre serveur Node.js est en cours d'ex√©cution sur **http://localhost:3000**.

---

### **1. Obtenir toutes les t√¢ches (`GET /tasks`)**
Commande :
```bash
curl -X GET http://localhost:3000/tasks
```

Explication :
- `-X GET` : Indique que c'est une requ√™te HTTP GET.
- Renvoie la liste des t√¢ches au format JSON.

---

### **2. Ajouter une nouvelle t√¢che (`POST /tasks`)**
Commande :
```bash
curl -X POST http://localhost:3000/tasks -H "Content-Type: application/json" -d '{"title": "Nouvelle t√¢che"}'
```

Explication :
- `-X POST` : Indique une requ√™te HTTP POST.
- `-H "Content-Type: application/json"` : Ajoute un en-t√™te HTTP pour sp√©cifier que le corps de la requ√™te est en JSON.
- `-d '{"title": "Nouvelle t√¢che"}'` : Donn√©es envoy√©es dans le corps de la requ√™te.

---

### **3. Mettre √† jour une t√¢che (`PUT /tasks/:id`)**
Commande :
```bash
curl -X PUT http://localhost:3000/tasks/1 -H "Content-Type: application/json" -d '{"title": "Apprendre Node.js en profondeur", "completed": true}'
```

Explication :
- `http://localhost:3000/tasks/1` : Met √† jour la t√¢che avec `id=1`.
- `-d '{"title": "Apprendre Node.js en profondeur", "completed": true}'` : Envoie les nouvelles valeurs pour `title` et `completed`.

---

### **4. Supprimer une t√¢che (`DELETE /tasks/:id`)**
Commande :
```bash
curl -X DELETE http://localhost:3000/tasks/1
```

Explication :
- `-X DELETE` : Indique une requ√™te HTTP DELETE.
- `http://localhost:3000/tasks/1` : Supprime la t√¢che avec `id=1`.

---

### **Exemples combin√©s**
- Pour v√©rifier si l'ajout ou la mise √† jour a fonctionn√©, relancez la commande `GET /tasks` pour voir les modifications dans la liste des t√¢ches.

### **Test rapide avec des √©tapes :**
1. **Lister les t√¢ches** :
   ```bash
   curl -X GET http://localhost:3000/tasks
   ```

2. **Ajouter une t√¢che** :
   ```bash
   curl -X POST http://localhost:3000/tasks -H "Content-Type: application/json" -d '{"title": "Nouvelle t√¢che"}'
   ```

3. **V√©rifier la nouvelle t√¢che** :
   ```bash
   curl -X GET http://localhost:3000/tasks
   ```

4. **Mettre √† jour une t√¢che** :
   ```bash
   curl -X PUT http://localhost:3000/tasks/1 -H "Content-Type: application/json" -d '{"completed": true}'
   ```

5. **Supprimer une t√¢che** :
   ```bash
   curl -X DELETE http://localhost:3000/tasks/1
   ```

Ces commandes vous permettent de tester toutes les fonctionnalit√©s de votre API directement depuis le terminal. üöÄ
